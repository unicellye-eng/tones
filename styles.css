
/* Theme variables (ported from the original template) */
:root {
  --background: 210 20% 98%;
      --foreground: 210 50% 10%;

      --card: 0 0% 100%;
      --card-foreground: 210 50% 10%;

      --popover: 0 0% 100%;
      --popover-foreground: 210 50% 10%;

      --primary: 210 79% 46%;
      --primary-500: 210 79% 50%;
      --primary-600: 210 79% 46%;
      --primary-700: 210 79% 40%;
      --primary-800: 210 79% 34%;
      --primary-foreground: 0 0% 100%;

      --secondary: 210 40% 94%;
      --secondary-foreground: 210 50% 20%;

      --muted: 210 30% 96%;
      --muted-foreground: 210 20% 45%;

      --accent: 210 60% 90%;
      --accent-foreground: 210 79% 35%;

      --destructive: 0 84% 60%;
      --destructive-foreground: 0 0% 100%;

      --border: 210 30% 88%;
      --input: 210 30% 88%;
      --ring: 210 79% 46%;

      --radius: 0.75rem;

      --sidebar-background: 0 0% 98%;
      --sidebar-foreground: 240 5.3% 26.1%;
      --sidebar-primary: 240 5.9% 10%;
      --sidebar-primary-foreground: 0 0% 98%;
      --sidebar-accent: 240 4.8% 95.9%;
      --sidebar-accent-foreground: 240 5.9% 10%;
      --sidebar-border: 220 13% 91%;
      --sidebar-ring: 217.2 91.2% 59.8%;
}

.dark {
  --background: 210 50% 8%;
      --foreground: 210 20% 98%;

      --card: 210 50% 12%;
      --card-foreground: 210 20% 98%;

      --popover: 210 50% 12%;
      --popover-foreground: 210 20% 98%;

      --primary: 210 79% 55%;
      --primary-500: 210 79% 60%;
      --primary-600: 210 79% 55%;
      --primary-700: 210 79% 50%;
      --primary-800: 210 79% 45%;
      --primary-foreground: 0 0% 100%;

      --secondary: 210 40% 18%;
      --secondary-foreground: 210 20% 98%;

      --muted: 210 30% 18%;
      --muted-foreground: 210 20% 65%;

      --accent: 210 50% 22%;
      --accent-foreground: 210 79% 70%;

      --destructive: 0 62% 40%;
      --destructive-foreground: 0 0% 100%;

      --border: 210 30% 22%;
      --input: 210 30% 22%;
      --ring: 210 79% 55%;

      --sidebar-background: 240 5.9% 10%;
      --sidebar-foreground: 240 4.8% 95.9%;
      --sidebar-primary: 224.3 76.3% 48%;
      --sidebar-primary-foreground: 0 0% 100%;
      --sidebar-accent: 240 3.7% 15.9%;
      --sidebar-accent-foreground: 240 4.8% 95.9%;
      --sidebar-border: 240 3.7% 15.9%;
      --sidebar-ring: 217.2 91.2% 59.8%;
}

:root, .dark {
  --radius: 16px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Tahoma, Arial;
  background: hsl(var(--background));
  color: hsl(var(--foreground));
  position: relative;
  overflow-x: hidden;
}

/* Subtle musical background texture (very light, no color changes) */
body::before{
  content:"";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  opacity: .095;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='220' viewBox='0 0 220 220'%3E%3Cg fill='white' fill-opacity='1'%3E%3Ctext x='24' y='64' font-size='44' font-family='Arial'%3E%E2%99%AA%3C/text%3E%3Ctext x='140' y='118' font-size='38' font-family='Arial'%3E%E2%99%AB%3C/text%3E%3Ctext x='72' y='176' font-size='40' font-family='Arial'%3E%E2%99%A9%3C/text%3E%3C/g%3E%3C/svg%3E");
  background-repeat: repeat;
  background-size: 220px 220px;
  filter: blur(.15px);
  animation: musicDrift 26s linear infinite;
}

body::after{
  content:"";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  background:
    radial-gradient(600px 600px at 18% 12%, hsla(var(--primary-500) / .18), transparent 60%),
    radial-gradient(700px 700px at 85% 70%, hsla(var(--primary-700) / .14), transparent 65%);
  mix-blend-mode: soft-light;
  opacity: .85;
}

@keyframes musicDrift{
  0%{ transform: translate3d(0,0,0) rotate(0deg); }
  50%{ transform: translate3d(-18px, 12px, 0) rotate(0.4deg); }
  100%{ transform: translate3d(0,0,0) rotate(0deg); }
}

a{color:inherit;text-decoration:none}
img{max-width:100%;display:block}

.hidden{display:none !important}

.safe-bottom{padding-bottom: env(safe-area-inset-bottom);}
.safe-top{padding-top: env(safe-area-inset-top);}

/* Header */
.app-header{
  position: sticky;
  top: 0;
  z-index: 50;
  background: linear-gradient(90deg, hsl(var(--primary-700)), hsl(var(--primary-500)));
  color: hsl(var(--primary-foreground));
}
.header-inner{
  display:flex;
  align-items:center;
  height: 56px;
  padding: 0 16px;
  gap: 12px;
  position: relative;
}
.icon-btn{
  width: 40px;
  height: 40px;
  border-radius: 999px;
  border: 1px solid transparent;
  background: transparent;
  color: inherit;
  display:flex;
  align-items:center;
  justify-content:center;
}
.icon-btn{-webkit-tap-highlight-color: transparent; outline: none;}
.icon-btn:focus{outline:none;}
.icon-btn:focus-visible{border-color: hsl(var(--ring)); box-shadow: 0 0 0 3px hsla(var(--ring), .35);}

.icon-btn:hover{background: rgba(255,255,255,.10);}
.chev{font-size:28px; line-height:1; transform: rotate(180deg);}

/* Brand */
.brand{display:flex; align-items:center; gap: 12px; flex:1;}
.logo{width:32px;height:32px;border-radius: 10px;}
.header-title{margin:0; font-size: 18px; font-weight: 800;}

.app-main{min-height: calc(100vh - 56px); position: relative; z-index: 1;}
.pad{padding: 16px;}

/* Categories grid */
.cats-grid{
  display:grid;
  grid-template-columns: repeat(2, minmax(0,1fr));
  gap: 12px;
}
@media (min-width: 640px) {
  .cats-grid{grid-template-columns: repeat(3, minmax(0,1fr));}
}
@media (min-width: 768px) {
  .cats-grid{grid-template-columns: repeat(4, minmax(0,1fr));}
}
@media (min-width: 1024px) {
  .cats-grid{grid-template-columns: repeat(5, minmax(0,1fr));}
}

.cat-card{
  position: relative;
  border-radius: 20px;
  overflow: hidden;
  border: 1px solid hsl(var(--border));
  background: hsl(var(--card));
  color: hsl(var(--card-foreground));
  padding: 14px 12px;
  min-height: 110px;
  display:flex;
  align-items:flex-end;
  justify-content:center;
  text-align:center;
  cursor:pointer;
  transform: translateZ(0);
  transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease;
  box-shadow: 0 10px 30px rgba(0,0,0,.20);
}
.cat-card:active{transform: scale(.98);}
.cat-card:hover{border-color: hsl(var(--ring));}
.cat-bg{
  position:absolute; inset:0;
  background-size: cover;
  background-position:center;
  filter: saturate(1.05);
  opacity:.70;
}
.cat-overlay{
  position:absolute; inset:0;
  background: linear-gradient(to top, rgba(0,0,0,.65), rgba(0,0,0,.15));
}
.cat-shine{
  position:absolute; inset:0;
  background: linear-gradient(45deg, transparent, rgba(255,255,255,.18), transparent);
  transform: translateX(-120%);
  transition: transform .7s ease;
}
.cat-card:hover .cat-shine{transform: translateX(120%);}

.cat-name{
  position: relative;
  font-weight: 800;
  font-size: 14px;
  letter-spacing: .2px;
  line-height: 1.2;
  text-shadow: 0 2px 10px rgba(0,0,0,.35);
}

/* List */
.list{display:flex; flex-direction:column; gap: 10px;}
.tone{
  display:flex;
  align-items:center;
  gap: 12px;
  padding: 12px;
  border-radius: 18px;
  border: 1px solid hsl(var(--border));
  background: hsl(var(--card));
  color: hsl(var(--card-foreground));
  box-shadow: 0 10px 26px rgba(0,0,0,.18);
  cursor:pointer;
  transition: transform .15s ease, border-color .15s ease;
}
.tone:active{transform: scale(.99);}
.tone:hover{border-color: hsl(var(--ring));}

.thumb{
  width: 52px;
  height: 52px;
  border-radius: 14px;
  object-fit: cover;
  background: rgba(255,255,255,.06);
}
.tone-name{flex:1; font-weight: 700; font-size: 14px;}
.btn{
  border-radius: 14px;
  padding: 10px 12px;
  border: 1px solid hsl(var(--border));
  background: transparent;
  color: inherit;
  cursor:pointer;
  -webkit-tap-highlight-color: transparent;
  outline: none;
}

.btn:focus{outline:none;}
.btn:focus-visible{
  border-color: hsl(var(--ring));
  box-shadow: 0 0 0 3px hsla(var(--ring), .35);
}

.btn.primary{
  background: hsl(var(--primary-600));
  color: hsl(var(--primary-foreground));
  border-color: transparent;
}
.btn.primary:hover{background: hsl(var(--primary-700));}
.btn.primary:active{background: hsl(var(--primary-800));}
.btn.ghost{background: transparent;}
.btn.play{min-width: 54px; text-align:center; font-size: 16px;}
.btn.play:hover{background: rgba(255,255,255,.06);}

/* Smaller buttons (for install mini card) */
.btn.btn-sm{
  padding: 8px 10px;
  font-size: 12px;
  border-radius: 12px;
}

/* Details */
.details-card{
  border: 1px solid hsl(var(--border));
  background: hsl(var(--card));
  color: hsl(var(--card-foreground));
  border-radius: 22px;
  padding: 14px;
  box-shadow: 0 16px 36px rgba(0,0,0,.22);
}
.details-img{
  width: 100%;
  max-width: 360px;
  aspect-ratio: 1 / 1;
  margin: 0 auto 10px;
  border-radius: 22px;
  object-fit: cover;
  background: rgba(255,255,255,.06);
}
.details-name{text-align:center; font-weight: 900; margin: 6px 0 14px;}
.section-title{font-weight: 900; margin: 10px 0 8px;}
.subs{display:flex; flex-direction:column; gap: 10px;}
.sub-card{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 12px;
  border-radius: 18px;
  border: 1px solid hsl(var(--border));
  background: rgba(255,255,255,.02);
  padding: 12px;
}
.sub-left{display:flex; align-items:center; gap: 12px;}
.carrier{width:44px; height:44px; object-fit:contain; border-radius: 14px; background:#fff;}
.sub-meta{font-size: 13px; line-height:1.4; opacity:.95;}
.sub-meta .cname{font-weight: 900;}
.sub-meta .ccode{opacity:.95;}

.toast{margin-top: 10px; text-align:center; font-size: 13px;}
.toast.hidden{display:none}

.hint{margin-top: 12px; opacity:.85; font-size: 13px; text-align:center;}

/* Footer */
.footer{padding: 0 16px 16px;}
.footer-card{
  border-radius: 22px;
  border: 1px solid hsl(var(--border));
  background: rgba(255,255,255,.03);
  padding: 10px;
}
.footer-title{font-weight: 900; margin-bottom: 6px;}

.contact-cards{
  display:grid;
  grid-template-columns: 1fr;
  gap:8px;
  font-size: 13px;
}
@media (min-width: 680px){
  .contact-cards{ grid-template-columns: repeat(3, minmax(0,1fr)); }
}
.contact-card{
  display:flex;
  align-items:center;
  gap:8px;
  padding:8px 10px;
  border-radius:16px;
  border:1px solid hsl(var(--border));
  background: rgba(255,255,255,.02);
  text-decoration:none;
  color: inherit;
}
.contact-ic{
  width:36px; height:36px;
  border-radius: 999px;
  display:grid;
  place-items:center;
  border:1px solid hsl(var(--border));
  background: rgba(0,0,0,.25);
  flex: 0 0 auto;
}
.contact-ic svg{ width:20px; height:20px; }
.contact-meta{ display:flex; flex-direction:column; gap:2px; min-width:0; }
.contact-label{ font-weight:800; font-size:12px; opacity:.9; }
.contact-value{ font-weight:700; font-size:14px; direction:ltr; text-align:right; word-break:break-word; }

.social-row{
  display:flex;
  gap:10px;
  margin-top: 8px;
  justify-content:flex-start;
  flex-wrap:nowrap;
  overflow-x:auto;
  padding-bottom: 2px;
}
.social-row::-webkit-scrollbar{ height: 6px; }
.social-row a{
  width:40px; height:40px;
  border-radius:999px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  border:1px solid hsl(var(--border));
  background: rgba(255,255,255,.02);
  flex: 0 0 auto;
  text-decoration:none;
}
.social-row svg{ width:20px; height:20px; }

/* Offline + install UI */
.offline{
  position:fixed; top:10px; left:10px; right:10px;
  padding: 10px;
  border-radius: 14px;
  border: 1px solid hsl(var(--border));
  background: rgba(0,0,0,.35);
  backdrop-filter: blur(6px);
  text-align:center;
}
.offline.hidden{display:none}

/* Install mini card (top, next to title) */
.install-card{
  position:absolute;
  top: 8px;
  left: 16px;
  display:flex;
  align-items:center;
  gap: 10px;
  padding: 8px 10px;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,.18);
  background: rgba(0,0,0,.25);
  backdrop-filter: blur(10px);
  box-shadow: 0 10px 30px rgba(0,0,0,.25);
}
.install-card.hidden{display:none}
.install-card-text{font-size: 12px; font-weight: 800; white-space: nowrap;}
.install-card-actions{display:flex; gap: 8px;}

/* On narrow screens keep it compact */
@media (max-width: 420px){
  .install-card{left: 10px; gap: 8px; padding: 7px 8px;}
  .install-card-text{display:none;}
}


/* Search (List view) */
.search-ic{font-size:20px; line-height:1;}
.search-bar{
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px 12px;
  border-radius: 16px;
  border:1px solid hsl(var(--border));
  background: rgba(0,0,0,.18);
  margin-bottom: 12px;
}
.search-input{
  flex:1;
  border:none;
  outline:none;
  background: transparent;
  color: inherit;
  font-size: 15px;
}
.search-input::placeholder{opacity:.7}


/* Social buttons with icons */
.social-btn{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:10px 12px;
  border-radius: 14px;
  border:1px solid hsl(var(--border));
  background: rgba(255,255,255,.02);
  font-size: 13px;
  text-decoration:none;
  color: inherit;
}
.social-ic{display:inline-flex; width:18px; height:18px}
.social-ic svg{width:18px; height:18px; display:block}
.social-txt{opacity:.95}

.empty{
  padding:14px;
  text-align:center;
  opacity:.75;
  border:1px dashed hsl(var(--border));
  border-radius: 14px;
}


/* Ringtone cards (requested edits) */
#listGrid.list{
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 12px;
}
@media (min-width: 680px){
  #listGrid.list{ grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); }
}
#listGrid .tone{
  flex-direction: column;
  align-items: stretch;
  gap: 10px;
  padding: 10px;
  /* Faster scrolling for long lists: let the browser skip offscreen rendering */
  content-visibility: auto;
  contain-intrinsic-size: 220px 260px;
  transform: translateZ(0);
  transition: transform .16s ease, box-shadow .16s ease, border-color .16s ease;
}
#listGrid .tone:hover{transform: translateY(-2px); box-shadow: 0 14px 32px rgba(0,0,0,.22);}
#listGrid .tone:active{transform: scale(.985);}
#listGrid .tone .thumb{
  width: 100%;
  height: auto;
  aspect-ratio: 1 / 1;
  border-radius: 16px;
}
#listGrid .tone-name{
  text-align: center;
  font-size: 13px;
  line-height: 1.25;
  min-height: calc(1.25em * 2);
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
#listGrid .tone-actions{
  display:flex;
  gap: 8px;
  align-items: center;
}
#listGrid .tone-actions .btn.play{
  min-width: 44px;
  padding: 10px 0;
}
#listGrid .tone-actions .btn.subscribe{
  flex: 1;
  text-align: center;
  padding: 10px 12px;
}


/* === Ensure play/pause icons are not emoji-colored === */
[data-play] svg {
  fill: currentColor;
  display: inline-block;
  vertical-align: middle;
}

[data-play] {
  -webkit-tap-highlight-color: transparent;
}
[data-play]:focus,
[data-play]:active {
  outline: none;
  box-shadow: none;
}


/* Load more button for long lists (prevents UI freeze with huge catalogs) */
.btn.load-more{display:block;width:100%;margin:12px 0;padding:14px 12px;border-radius:14px;}


/* Infinite scroll sentinel */
.load-more-sentinel{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  width:100%;
  margin:14px 0;
  padding:14px 12px;
  border-radius:14px;
  opacity:.85;
}
.load-more-sentinel .spinner{
  width:18px;
  height:18px;
  border-radius:999px;
  border:2px solid currentColor;
  border-top-color: transparent;
  animation: spin 1s linear infinite;
}
.load-more-sentinel .load-more-text{
  font-size:14px;
}
@keyframes spin{
  to{ transform: rotate(360deg); }
}


/* ==============================
   Contact layout (safe overrides)
   - Phone + WhatsApp side-by-side
   - Email full-width underneath
   - Social icons fill full width (no horizontal scroll)
   These rules are appended to avoid breaking existing UI.
   ============================== */

/* Two columns on all widths (so phone + WhatsApp align in one row) */
#contactLinks.contact-cards{
  grid-template-columns: repeat(2, minmax(0, 1fr));
}

/* Keep two columns even on larger screens (override the 3-column media rule) */
@media (min-width: 680px){
  #contactLinks.contact-cards{
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

/* The 3rd card is "ايميل" per renderContact() order in app.js */
#contactLinks.contact-cards > .contact-card:nth-child(3){
  grid-column: 1 / -1;
}

/* Social icons: distribute across full width and prevent horizontal scrolling */
#socialLinks.social-row{
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(44px, 1fr));
  gap: 10px;
  justify-content: stretch;
  overflow-x: hidden;
  padding-bottom: 0;
}

/* Center each circular icon in its grid cell */
#socialLinks.social-row a{
  width: 44px;
  height: 44px;
  justify-self: center;
}


/* === Header color moved from inline <style> (security improvement) === */
/* Ultra Dark Unicell Header */
.app-header, header, .topbar {
  background: #041A3A !important;
}
.app-header *, header *, .topbar * {
  color: #ffffff !important;
}
/* === Contact layout: Call + WhatsApp side-by-side, Email full-width (robust) === */
#contactLinks.contact-cards{
  grid-template-columns: repeat(2, minmax(0, 1fr));
}

/* Prevent returning to 3 columns on wider screens */
@media (min-width: 680px){
  #contactLinks.contact-cards{
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

/* Email card full width (doesn't depend on position) */
#contactLinks.contact-cards > .contact-card.is-email{
  grid-column: 1 / -1;
}

/* === Social icons: fill full width, no horizontal scroll === */
#socialLinks.social-row{
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(44px, 1fr));
  gap: 10px;
  justify-content: stretch;
  overflow-x: hidden;
}

#socialLinks.social-row a{
  width: 44px;
  height: 44px;
  justify-self: center;
}

/* === Option A: Clean Grid Cards (single primary action) === */

/* Card layout */
#listGrid.list{
  gap: 14px;
}
#listGrid .tone{
  padding: 12px;
  gap: 10px;
}

/* Image: consistent square with rounded corners */
#listGrid .tone .thumb{
  aspect-ratio: 1 / 1;
  object-fit: cover;
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,0.10);
}

/* Title: one line, clean */
#listGrid .tone .tone-name{
  font-size: 14px;
  line-height: 1.2;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding: 0 2px;
}

/* Actions: play (icon) + details (full) */
#listGrid .tone-actions{
  display: grid;
  grid-template-columns: 48px 1fr;
  gap: 10px;
  align-items: center;
  width: 100%;
}

/* Play button as primary icon */
#listGrid .tone-actions .btn.play{
  width: 48px;
  height: 48px;
  padding: 0;
  border-radius: 16px;
}

/* Details as secondary (less visually heavy than primary) */
#listGrid .tone-actions .btn.subscribe{
  height: 48px;
  padding: 0 14px;
  border-radius: 16px;
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.12);
}

/* Keep active feedback */
#listGrid .tone-actions .btn.subscribe:active,
#listGrid .tone-actions .btn.play:active{
  transform: scale(0.98);
}

/* === Option A polish: consistent card height + calmer hover + better spacing === */
#listGrid .tone{
  border-radius: 20px;
}

#listGrid .tone .tone-name{
  margin-top: 2px;
}

/* Keep cards visually consistent */
#listGrid .tone .thumb{
  box-shadow: 0 8px 18px rgba(0,0,0,0.18);
}

/* Calmer hover on desktop */
@media (hover: hover){
  #listGrid .tone:hover{
    transform: translateY(-1px);
    box-shadow: 0 12px 26px rgba(0,0,0,0.20);
  }
}

/* Prevent buttons from wrapping in very narrow screens */
#listGrid .tone-actions{
  min-width: 0;
}

/* === Lighter Tone Card Background === */
#listGrid .tone{
  background: hsl(var(--card) / 0.92);
  border: 1px solid hsl(var(--border));
}

.dark #listGrid .tone{
  background: hsl(var(--card) / 1);
}

/* === Darker navy + higher contrast + tighter spacing === */

/* Darken header/navy */
.app-header, header, .topbar{
  background: #021027 !important;
}

/* Increase contrast for cards (slightly stronger border/shadow) */
#listGrid .tone{
  border: 1px solid rgba(255,255,255,0.14);
  box-shadow: 0 10px 22px rgba(0,0,0,0.18);
}
#listGrid .tone .tone-name{
  color: hsl(var(--foreground));
}

/* Reduce the space between name and the action buttons */
#listGrid .tone{
  gap: 8px;
}
#listGrid .tone .tone-name{
  margin: 0;
  padding: 0 2px;
}
#listGrid .tone-actions{
  margin-top: 0;
}

/* === Focus/press ring on tone cards (restore subtle blue frame) === */
#listGrid .tone:focus-within{
  outline: 2px solid hsl(var(--ring));
  outline-offset: 2px;
}
#listGrid .tone:active{
  outline: 2px solid hsl(var(--ring));
  outline-offset: 2px;
}

/* === Internal title positioning === */
.center-title{
  text-align: center;
  width: 100%;
}
.offset-right-title{
  transform: translateX(10px); /* slight move to the right */
}
